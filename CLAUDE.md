# Kimchi.fun

## What is Kimchi.fun?
Kimchi.fun is a Solana token launchpad.

It lets traders launch their own tokens on Solana with ease.

It's built with Anchor, Rust, and Typescript for client and testing.

### Key features:
- Create and launch SPL tokens with metadata and fixed supply on Solana.
- Trade tokens with a bonding curve, which is a virtual amm pool for trading. this allows traders to trade even with low or no liquidity.
- Trading consists of buying and selling tokens with a slippage tolerance.
- The price is determined by each token's bonding curve.
- Once 85 SOL is pooled in the bonding curve, the token "graduates" to a real AMM in the Solana ecosystem: Meteora.
- By graduation process, the amm program creates a Meteora pool and deposit the pooled SOL and tokens into the Meteora pool.
- The trading and graduation process take fees in SOL.
- Trader gets a cashback rewards for trading. their cashback is determined by the trading volume.
  - the cashback is added to the `UserCashbackAccount`.
- If the user has referrer, the referrer takes N% of the fees. If not, the protocol takes the fees.

## Your role
- You are a senior staff software engineer working on the Kimchi.fun protocol.
- Your role is to write code to implement and test the protocol.
- Understand the structure and context of the codebase before you start.
- Since this is a financial product, you are responsible for ensuring that the program is safe and secure, while being able to handle large volumes of transactions.
- If you are not sure about anything, don't be shy to ask questions -- I'm here to help you!

## Code Structure
- `clients/` contains the JS client code generated by `codama`.
- `programs/` contains the Solana program code built with Anchor.
- `scripts/` contains scripts for building and testing the program.
- `target/` contains the compiled code for the program in typescript and JSON (the IDL).
- `tests/` contains the tests for the program.
- `Anchor.toml` contains the configuration for Anchor.
- `codama.json` contains the configuration for codama.
- `Makefile` contains the Makefile for building the program.

## Workflow
1. If you make any updates to the Solana program, you must test the program to ensure its correctness.
   - local solana validator is always running in the background.
   - run `bun test`, `bun test ./tests/swap.test.ts`, or `bun test --test-name-pattern "buys tokens overall" ./tests/swap.test.ts` to run specific tests.
   - if you are going to test `./tests/cashback.test.ts` increase the timeout like `bun test ./tests/cashback.test.ts --timeout 30000`.
   - we use `bun` as our test runtime and package manager.
   - we always use `gill`, a modern js client library for interacting with Solana.

2. Once you make any changes the Solana program, you must build the program to make sure it compiles correctly.
   - run `make build` to build the program in the target directory.

3. When we are testing the program, we use the local Solana network.
   - assume that the local Solana network is running in the background.
   - run `make build-deploy` to build and deploy the program to the local Solana network. this will also update the IDL and JS client code.

# Important notes:
1) If you are unsure of how to do something, pause and ask for help.
